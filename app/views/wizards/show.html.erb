
<div class="hogwarts-home-bg py-5" style="background: linear-gradient(135deg, #2c2c54 60%, #8e44ad 100%); min-height: 100vh;">
  <div class="container">
    <div class="row justify-content-center mb-5">
      <div class="col-md-8 text-center">
        <% if @wizard.avatar.attached? %>
          <%= image_tag @wizard.avatar.variant(resize_to_limit: [120,120]), class: "rounded-circle shadow mb-3", alt: "Wizard Avatar" %>
        <% else %>
          <img src="/icon.png" alt="Hogwarts Crest" style="width:80px; animation: float 2s infinite ease-in-out;">
        <% end %>
        <h1 class="display-4 fw-bold text-warning mb-3" style="font-family: 'Cinzel', serif; text-shadow: 0 2px 8px #23272b, 0 0 12px #f7ca18;">üßô‚Äç‚ôÇÔ∏è <%= @wizard.name %></h1>
        <span class="badge bg-warning text-dark mb-2" style="font-size:1.2rem;">House: <%= @wizard.hogwarts_house %></span>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-lg border-0 bg-dark text-light hogwarts-card">
          <div class="card-body">
            <% if current_wizard != @wizard %>
              <div class="mb-4 d-flex gap-2 justify-content-center">
                <% if @wizard.followed_by?(current_wizard) %>
                  <%= button_to "Unfollow", unfollow_wizard_path(@wizard), method: :post, class: "btn btn-danger px-4 py-2", style: "min-width:120px; min-height:40px; font-size:1.1rem; border-radius:1rem;" %>
                <% else %>
                      <% if current_wizard.followed_by?(@wizard) && !@wizard.followed_by?(current_wizard) %>
                  <%= button_to "Follow Back", follow_wizard_path(@wizard), method: :post, class: "btn btn-warning px-4 py-2", style: "min-width:120px; min-height:40px; font-size:1.1rem; border-radius:1rem;" %>
                     <% else %>
                  <%= button_to "Follow", follow_wizard_path(@wizard), method: :post, class: "btn btn-success px-4 py-2", style: "min-width:120px; min-height:40px; font-size:1.1rem; border-radius:1rem;" %>
                <% end %>
                <% end %>
          
              </div>
            <% end %>
            <div class="mb-4 d-flex justify-content-center gap-4">
              <%= link_to followers_wizard_path(@wizard), class: "text-decoration-none" do %>
                <div class="stat-card text-center px-4 py-2" style="cursor:pointer; background:rgba(255,255,255,0.08); border-radius:1rem; box-shadow:0 2px 8px #8e44ad;">
                  <div class="fw-bold text-info" style="font-size:2rem;">
                    <i class="fa fa-users me-2"></i><%= @wizard.followers.count %>
                  </div>
                  <div class="text-light" style="font-size:1.1rem;">Followers</div>
                </div>
              <% end %>
              <%= link_to following_wizard_path(@wizard), class: "text-decoration-none" do %>
                <div class="stat-card text-center px-4 py-2" style="cursor:pointer; background:rgba(255,255,255,0.08); border-radius:1rem; box-shadow:0 2px 8px #8e44ad;">
                  <div class="fw-bold text-primary" style="font-size:2rem;">
                    <i class="fa fa-user-plus me-2"></i><%= @wizard.following.count %>
                  </div>
                  <div class="text-light" style="font-size:1.1rem;">Following</div>
                </div>
              <% end %>
            </div>
            <ul class="list-group list-group-flush mb-3">
              <li class="list-group-item bg-transparent text-light"><strong>Email:</strong> <%= @wizard.email %></li>
              <li class="list-group-item bg-transparent text-light"><strong>Date of Birth:</strong> <%= @wizard.date_of_birth %></li>
              <li class="list-group-item bg-transparent text-light"><strong>Bio:</strong> <%= @wizard.bio.presence || "N/A" %></li>
              <li class="list-group-item bg-transparent text-light"><strong>Muggle Relatives:</strong> <%= @wizard.muggle_relatives ? "Yes" : "No" %></li>
            </ul>
            <div class="mb-4 spells-section" style="border: 2px solid #8e44ad; border-radius: 1rem; background: rgba(255,255,255,0.04);">
              <div class="d-flex justify-content-between align-items-center mb-2 px-3 pt-3">
                <strong class="text-warning" style="font-size:1.2rem;">Spells</strong>
                <% if @wizard.spells.count > 0 %>
                  <%= link_to "View All Spells", wizard_spells_path(@wizard), class: "btn btn-hogwarts btn-sm px-3 py-1" %>
                <% end %>
              </div>
              <div class="d-flex flex-wrap gap-2 px-3 pb-3">
                <% @wizard.spells.limit(6).each do |spell| %>
                  <span class="badge bg-purple text-light px-3 py-2" style="font-size:1rem; background:#8e44ad; border-radius:1rem;"> <%= spell.name %> </span>
                <% end %>
                <% if @wizard.spells.count > 6 %>
                  <span class="badge bg-secondary px-3 py-2" style="border-radius:1rem;">+<%= @wizard.spells.count - 6 %> more</span>
                <% end %>
              </div>
            </div>
         
        
            <% if current_wizard == @wizard || current_wizard.is_admin? %>
              <%= link_to "Edit Profile", edit_wizard_path(@wizard), class: "btn btn-hogwarts btn-lg mb-2" %>
              <%= link_to "Change Password", edit_password_wizard_path(@wizard), class: "btn btn-hogwarts btn-lg mb-2" %>
              <%= form_with model: @wizard, url: wizard_path(@wizard), method: :patch, local: true, html: { multipart: true, class: "mt-3" } do |f| %>
                <div class="mb-2">
                  <%= f.label :avatar, "Upload Profile Picture", class: "form-label text-warning" %>
                  <%= f.file_field :avatar, class: "form-control" %>
                </div>
                <%= f.submit "Upload Avatar", class: "btn btn-warning btn-sm" %>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
  .hogwarts-card {
    border-radius: 1rem;
    box-shadow: 0 2px 12px #8e44ad;
  }
</style>
